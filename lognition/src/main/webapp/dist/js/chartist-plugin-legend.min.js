!function(t,a){"function"==typeof define&&define.amd?define(["chartist"],function(e){return t.returnExportsGlobal=a(e)}):"object"==typeof exports?module.exports=a(require("chartist")):t["Chartist.plugins.legend"]=a(t.Chartist)}(this,function(i){"use strict";var t={className:"",classNames:!1,removeAll:!1,legendNames:!1,clickable:!0,onClick:null,position:"top"};return i.plugins=i.plugins||{},i.plugins.legend=function(v){if(v&&v.position){if(!("top"===v.position||"bottom"===v.position||v.position instanceof HTMLElement))throw Error("The position you entered is not a valid position");if(v.position instanceof HTMLElement){var e=v.position;delete v.position}}return v=i.extend({},t,v),e&&(v.position=e),function(r){var e;(e=r.container.querySelector(".ct-legend"))&&e.parentNode.removeChild(e);var t,a,c,d,u,p,f=((t=document.createElement("ul")).className="ct-legend",r instanceof i.Pie&&t.classList.add("ct-legend-inside"),"string"==typeof v.className&&0<v.className.length&&t.classList.add(v.className),r.options.width&&(t.style.cssText="width: "+r.options.width+"px;margin: 0 auto;"),t),n=r instanceof i.Pie&&r.data.labels&&r.data.labels.length,s=(a=n,v.legendNames||(a?r.data.labels:r.data.series)),m=function(e){for(var t=new Array(r.data.series.length),a=0;a<r.data.series.length;a++)t[a]={data:r.data.series[a],label:e?r.data.labels[a]:null,legend:-1};return t}(n),g=[],h=Array.isArray(v.classNames)&&v.classNames.length===s.length;s.forEach(function(e,t){var a,n,s,i,l=e.name||e,o=e.series||[t],r=(a=t,n=l,s=h,(i=document.createElement("li")).classList.add("ct-series-"+a),s&&i.classList.add(v.classNames[a]),i.setAttribute("data-legend",a),i.textContent=n,i);f.appendChild(r),o.forEach(function(e){m[e].legend=t}),g.push({text:l,series:o,active:!0})}),r.on("created",function(e){!function(e){if(v.position instanceof HTMLElement)v.position.insertBefore(e,null);else switch(v.position){case"top":r.container.insertBefore(e,r.container.childNodes[0]);break;case"bottom":r.container.insertBefore(e,null)}}(f)}),v.clickable&&(r.data.series=r.data.series.map(function(e,t){return"object"!=typeof e&&(e={value:e}),e.className=e.className||r.options.classNames.series+"-"+i.alphaNumerate(t),e}),d=g,u=m,p=n,(c=f).addEventListener("click",function(e){var t=e.target;if(t.parentNode===c&&t.hasAttribute("data-legend")){e.preventDefault();var a=parseInt(t.getAttribute("data-legend")),n=d[a];if(n.active){n.active=!1,t.classList.add("inactive");var s=d.filter(function(e){return e.active}).length;if(!v.removeAll&&0==s)for(var i=0;i<d.length;i++)d[i].active=!0,c.childNodes[i].classList.remove("inactive")}else n.active=!0,t.classList.remove("inactive");var l=[],o=[];for(i=0;i<u.length;i++)-1!=u[i].legend&&d[u[i].legend].active&&(l.push(u[i].data),o.push(u[i].label));r.data.series=l,p&&(r.data.labels=o),r.update(),v.onClick&&v.onClick(r,e)}}))}},i.plugins.legend});
